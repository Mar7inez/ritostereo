/* RITO STEREO - Optimized JS */
document.addEventListener('DOMContentLoaded',function(){
    const nav=document.querySelector('nav');
    const menuToggle=document.querySelector('[data-menu-toggle]');
    const mobileMenu=document.querySelector('[data-mobile-menu]');
    const contactForm=document.querySelector('#contact-form');
    const galleryFilters=document.querySelectorAll('[data-gallery-filter]');
    const galleryItems=document.querySelectorAll('[data-gallery-item]');
    
    if(menuToggle&&mobileMenu){
        menuToggle.addEventListener('click',function(){
            mobileMenu.classList.toggle('hidden');
        });
    }
    
    if(contactForm){
        contactForm.addEventListener('submit',async function(e){
            e.preventDefault();
            const formData=new FormData(this);
            const submitBtn=this.querySelector('[type="submit"]');
            const originalText=submitBtn.textContent;
            
            submitBtn.textContent='Enviando...';
            submitBtn.disabled=true;
            
            try{
                const response=await fetch('/contact.php',{
                    method:'POST',
                    body:formData
                });
                const result=await response.json();
                
                if(result.success){
                    this.reset();
                    showNotification('Mensaje enviado correctamente','success');
                }else{
                    showNotification(result.message||'Error al enviar mensaje','error');
                }
            }catch(error){
                showNotification('Error de conexiÃ³n','error');
            }finally{
                submitBtn.textContent=originalText;
                submitBtn.disabled=false;
            }
        });
    }
    
    if(galleryFilters.length>0){
        galleryFilters.forEach(filter=>{
            filter.addEventListener('click',function(){
                const filterValue=this.dataset.galleryFilter;
                
                galleryFilters.forEach(f=>f.classList.remove('bg-rito-red','text-white'));
                this.classList.add('bg-rito-red','text-white');
                
                galleryItems.forEach(item=>{
                    if(filterValue==='all'||item.dataset.galleryItem===filterValue){
                        item.style.display='block';
                    }else{
                        item.style.display='none';
                    }
                });
            });
        });
    }
    
    if(nav){
        window.addEventListener('scroll',function(){
            if(window.scrollY>100){
                nav.classList.add('bg-rito-black','shadow-lg');
            }else{
                nav.classList.remove('bg-rito-black','shadow-lg');
            }
        });
    }
});

function showNotification(message,type='info'){
    const notification=document.createElement('div');
    notification.className=`fixed top-4 right-4 p-4 rounded-lg text-white z-50 ${
        type==='success'?'bg-green-600':type==='error'?'bg-red-600':'bg-blue-600'
    }`;
    notification.textContent=message;
    
    document.body.appendChild(notification);
    
    setTimeout(()=>{
        notification.remove();
    },5000);
}

function smoothScroll(target){
    const element=document.querySelector(target);
    if(element){
        element.scrollIntoView({behavior:'smooth'});
    }
}
